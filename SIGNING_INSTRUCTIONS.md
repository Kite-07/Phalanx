# Ed25519 Signing Instructions for Phalanx

## Key Pair Information

**Generated:** 2025-11-09T07:37:51.060346

### Public Key (Base64)
```
MCowBQYDK2VwAyEAP4B9tb00dolTFCGx4v83vAjcVGXZKOfMKLqSbpv0yEI=
```

### Files
- `ed25519_private_key.pem` - Private key (⚠️ KEEP SECRET!)
- `ed25519_public_key.txt` - Public key (safe to embed in app)

## How to Sign a Sender Pack

### Using Python (cryptography library)

```python
from cryptography.hazmat.primitives import serialization
from cryptography.hazmat.primitives.asymmetric.ed25519 import Ed25519PrivateKey
import json

# Load private key
with open("ed25519_private_key.pem", "rb") as f:
    private_key = serialization.load_pem_private_key(f.read(), password=None)

# Load sender pack JSON
with open("IN.json", "r", encoding="utf-8") as f:
    pack_json = f.read()

# Sign the JSON (exactly as stored in file)
signature = private_key.sign(pack_json.encode('utf-8'))
signature_hex = signature.hex()

print(f"Signature: {signature_hex}")

# Update the pack with signature
pack = json.loads(pack_json)
pack["signature"] = signature_hex

# Save updated pack
with open("IN.json", "w", encoding="utf-8") as f:
    json.dump(pack, f, indent=2, ensure_ascii=False)
```

### Using OpenSSL (command line)

```bash
# Sign file (produces binary signature)
openssl pkeyutl -sign -inkey ed25519_private_key.pem -rawin -in IN.json -out signature.bin

# Convert to hex
xxd -p signature.bin | tr -d '\n' > signature.hex

# Show signature
cat signature.hex
```

## Security Best Practices

1. **NEVER commit private key to git**
2. Store private key in password manager or hardware security module
3. Rotate keys periodically (every 6-12 months)
4. Keep backup of private key in secure offline location
5. Never email or share private key
6. Public key can be safely embedded in app code

## Updating the App

1. Copy public key to `SignatureVerifier.kt`:
   ```kotlin
   private const val PUBLIC_KEY_BASE64 = "MCowBQYDK2VwAyEAP4B9tb00dolTFCGx4v83vAjcVGXZKOfMKLqSbpv0yEI="
   ```

2. Sign all sender packs (IN.json, US.json, etc.)

3. Deploy updated packs via app update or remote config

## Key Rotation Procedure

When rotating keys:
1. Generate new key pair
2. Sign all packs with new key
3. Update app with new public key
4. Deploy app update
5. After 95% users updated, retire old key
6. Securely destroy old private key

---
Generated by generate_ed25519_keypair.py
